import{r as u,j as n}from"./index-DjeCeyEj.js";function h(a){if(!a)return[];const r=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(a.querySelectorAll(r.join(","))).filter(s=>!s.hasAttribute("disabled")&&!s.getAttribute("aria-hidden"))}function E({isOpen:a,onClose:r,title:s,children:w,labelledById:f,dataTestId:l="modal"}){const b=u.useRef(null),c=u.useRef(null),m=u.useRef(null);if(u.useEffect(()=>{if(!a)return;m.current=document.activeElement;const d=setTimeout(()=>{var t,i;(i=(t=h(c.current)[0]||c.current)==null?void 0:t.focus)==null||i.call(t)},0),v=e=>{var o,p;if(e.key==="Escape"){e.preventDefault(),r==null||r();return}if(e.key!=="Tab")return;const t=h(c.current);if(!t.length){e.preventDefault(),(p=(o=c.current)==null?void 0:o.focus)==null||p.call(o);return}const i=t[0],y=t[t.length-1],x=document.activeElement;e.shiftKey&&x===i?(e.preventDefault(),y.focus()):!e.shiftKey&&x===y&&(e.preventDefault(),i.focus())};document.addEventListener("keydown",v);const j=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{var e,t;clearTimeout(d),document.removeEventListener("keydown",v),document.body.style.overflow=j,(t=(e=m.current)==null?void 0:e.focus)==null||t.call(e)}},[a,r]),!a)return null;const g=d=>{d.target===b.current&&(r==null||r())};return n.jsx("div",{ref:b,onMouseDown:g,className:"fixed inset-0 z-[1000] grid place-items-center p-6",style:{background:"rgba(0,0,0,0.72)",backdropFilter:"blur(8px)"},"data-testid":`${l}-overlay`,children:n.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":s,"aria-labelledby":f,tabIndex:-1,ref:c,className:"w-full max-w-3xl fk-card p-5 md:p-6","data-testid":l,children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsx("div",{children:f?null:n.jsx("div",{className:"font-semibold",style:{color:"var(--text-primary)"},"data-testid":`${l}-title`,children:s})}),n.jsx("button",{type:"button",className:"fk-button",onClick:r,"data-testid":`${l}-close-button`,"aria-label":"Close",children:"Close"})]}),n.jsx("div",{className:"mt-4","data-testid":`${l}-content`,children:w})]})})}export{E as M};
