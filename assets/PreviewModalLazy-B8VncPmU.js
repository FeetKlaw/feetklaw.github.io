const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-DKGJZwIr.js","assets/index-61T6b_8C.js","assets/index-C0y8sObj.css","assets/mixin-C_e69MQf.js","assets/hls-BGvSEJpu.js","assets/react-v_XRV1Er.js","assets/index-DO1vFlwB.js","assets/react-D5gLIfCM.js","assets/react-DOSOzLwM.js","assets/react-CPMAMpiJ.js","assets/react-8LsF9uxo.js","assets/react-bfQoE6va.js","assets/react-DfQO-4yN.js","assets/Preview-Dp_bF0ow.js"])))=>i.map(i=>d[i]);
import{R as m,r as n,_ as y,j as w,S as X}from"./index-61T6b_8C.js";import{M as F}from"./Modal-BMvWELew.js";const U=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,O=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,C=/\.(m3u8)($|\?)/i,Y=/\.(mpd)($|\?)/i,K=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,q=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,B=/vimeo\.com\/(?!progressive_redirect).+/,Z=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,G=/open\.spotify\.com\/(\w+)\/(\w+)/i,J=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,Q=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,I=(e,t)=>{if(Array.isArray(e)){for(const o of e)if(typeof o=="string"&&I(o,t)||I(o.src,t))return!0;return!1}return t(e)},d={html:e=>I(e,t=>U.test(t)||O.test(t)),hls:e=>I(e,t=>C.test(t)),dash:e=>I(e,t=>Y.test(t)),mux:e=>K.test(e),youtube:e=>q.test(e),vimeo:e=>B.test(e)&&!O.test(e)&&!C.test(e),wistia:e=>Z.test(e),spotify:e=>G.test(e),twitch:e=>J.test(e),tiktok:e=>Q.test(e)},ee=m.forwardRef((e,t)=>{const o=U.test(`${e.src}`)?"audio":"video";return m.createElement(o,{...e,ref:t},e.children)});var te=ee;const ae=[{key:"hls",name:"hls.js",canPlay:d.hls,canEnablePIP:()=>!0,player:n.lazy(()=>y(()=>import("./react-DKGJZwIr.js"),__vite__mapDeps([0,1,2,3,4])))},{key:"dash",name:"dash.js",canPlay:d.dash,canEnablePIP:()=>!0,player:n.lazy(()=>y(()=>import("./react-v_XRV1Er.js"),__vite__mapDeps([5,1,2,3])))},{key:"mux",name:"Mux",canPlay:d.mux,canEnablePIP:()=>!0,player:n.lazy(()=>y(()=>import("./index-DO1vFlwB.js"),__vite__mapDeps([6,1,2,4,3])))},{key:"youtube",name:"YouTube",canPlay:d.youtube,player:n.lazy(()=>y(()=>import("./react-D5gLIfCM.js"),__vite__mapDeps([7,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:d.vimeo,player:n.lazy(()=>y(()=>import("./react-DOSOzLwM.js"),__vite__mapDeps([8,1,2])))},{key:"wistia",name:"Wistia",canPlay:d.wistia,canEnablePIP:()=>!0,player:n.lazy(()=>y(()=>import("./react-CPMAMpiJ.js"),__vite__mapDeps([9,1,2])))},{key:"spotify",name:"Spotify",canPlay:d.spotify,canEnablePIP:()=>!1,player:n.lazy(()=>y(()=>import("./react-8LsF9uxo.js"),__vite__mapDeps([10,1,2])))},{key:"twitch",name:"Twitch",canPlay:d.twitch,canEnablePIP:()=>!1,player:n.lazy(()=>y(()=>import("./react-bfQoE6va.js"),__vite__mapDeps([11,1,2])))},{key:"tiktok",name:"TikTok",canPlay:d.tiktok,canEnablePIP:()=>!1,player:n.lazy(()=>y(()=>import("./react-DfQO-4yN.js"),__vite__mapDeps([12,1,2])))},{key:"html",name:"html",canPlay:d.html,canEnablePIP:()=>!0,player:te}];var S=ae;const le={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},H=m.forwardRef((e,t)=>{const{playing:o,pip:u}=e,i=e.activePlayer,a=n.useRef(null),r=n.useRef(!0);n.useEffect(()=>{var l,c;a.current&&(a.current.paused&&o===!0&&a.current.play(),!a.current.paused&&o===!1&&a.current.pause(),a.current.playbackRate=(l=e.playbackRate)!=null?l:1,a.current.volume=(c=e.volume)!=null?c:1)}),n.useEffect(()=>{var l,c,s,h,k;if(!(!a.current||!globalThis.document)){if(u&&!document.pictureInPictureElement)try{(c=(l=a.current).requestPictureInPicture)==null||c.call(l)}catch{}if(!u&&document.pictureInPictureElement)try{(h=(s=a.current).exitPictureInPicture)==null||h.call(s),(k=document.exitPictureInPicture)==null||k.call(document)}catch{}}},[u]);const p=l=>{var c,s;r.current=!0,(c=e.onReady)==null||c.call(e),(s=e.onLoadStart)==null||s.call(e,l)},R=l=>{var c,s;r.current&&(r.current=!1,(c=e.onStart)==null||c.call(e,l)),(s=e.onPlay)==null||s.call(e,l)};if(!i)return null;const f={},g=["onReady","onStart"];for(const l in e)l.startsWith("on")&&!g.includes(l)&&(f[l]=e[l]);return m.createElement(i,{...f,style:e.style,className:e.className,slot:e.slot,ref:n.useCallback(l=>{a.current=l,typeof t=="function"?t(l):t!==null&&(t.current=l)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,disableRemotePlayback:e.disableRemotePlayback,config:e.config,onLoadStart:p,onPlay:R},e.children)});H.displayName="Player";var re=H;const ne=n.lazy(()=>y(()=>import("./Preview-Dp_bF0ow.js"),__vite__mapDeps([13,1,2]))),b=[],ie=(e,t)=>{const o=i=>{for(const a of[...b,...e])if(i&&a.canPlay(i))return a;return t||null},u=m.forwardRef((i,a)=>{const r={...le,...i},{src:p,slot:R,className:f,style:g,width:l,height:c,fallback:s,wrapper:h}=r,[k,E]=n.useState(!!r.light);n.useEffect(()=>{r.light?E(!0):E(!1)},[r.light]);const M=_=>{var P;E(!1),(P=r.onClickPreview)==null||P.call(r,_)},D=_=>{if(!_)return null;const{light:P,playIcon:T,previewTabIndex:v,oEmbedUrl:x,previewAriaLabel:A}=r;return m.createElement(ne,{src:_,light:P,playIcon:T,previewTabIndex:v,previewAriaLabel:A,oEmbedUrl:x,onClickPreview:M})},V=_=>{var P,T;const v=o(_);if(!v)return null;const{style:x,width:A,height:$,wrapper:L}=r,W=(P=r.config)==null?void 0:P[v.key];return m.createElement(re,{...r,ref:a,activePlayer:(T=v.player)!=null?T:v,slot:L?void 0:R,className:L?void 0:f,style:L?{display:"block",width:"100%",height:"100%"}:{display:"block",width:A,height:$,...x},config:W})},z=h??N,j=s===!1?N:n.Suspense;return m.createElement(z,{slot:R,className:f,style:{width:l,height:c,...g}},m.createElement(j,{fallback:s},k?D(p):V(p)))});return u.displayName="ReactPlayer",u.addCustomPlayer=i=>{b.push(i)},u.removeCustomPlayers=()=>{b.length=0},u.canPlay=i=>{if(i){for(const a of[...b,...e])if(a.canPlay(i))return!0}return!1},u.canEnablePIP=i=>{var a;if(i){for(const r of[...b,...e])if(r.canPlay(i)&&((a=r.canEnablePIP)!=null&&a.call(r)))return!0}return!1},u},N=({children:e})=>e,ce=S[S.length-1];var oe=ie(S,ce);function de({isOpen:e,onClose:t}){const o=X.previewEmbedUrl;return w.jsx(F,{isOpen:e,onClose:t,title:"Preview",dataTestId:"preview-modal",children:w.jsxs("div",{"data-testid":"preview-modal-body",children:[w.jsx("div",{className:"rounded-[14px] overflow-hidden","data-testid":"preview-modal-embed",style:{maxHeight:"500px"},children:w.jsx(oe,{url:o,controls:!0,width:"100%",height:"100%",style:{borderRadius:"14px",backgroundColor:"black"},playing:!1})}),w.jsx("div",{className:"mt-4 text-xs",style:{color:"var(--text-muted)"},children:"Adults only. Full access is via Patreon membership."})]})})}export{de as default};
